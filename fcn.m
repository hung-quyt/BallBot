thetax(t) = x1 = u(1); thetax_dot(t)= x2 = u(2); thetax_2dot(t) = x3;
thetay(t) = x4 = u(3); thetay_dot(t) = x5 = u(4); thetay_2dot(t) = x6;
psix(t) = x7 = u(5); psix_dot(t) = x8 = u(6); psix_2dot = x9;
psiy(t) = x10 = u(7); psiy_dot(t) = x11 = u(8); psiy_2dot = x12;
psiz(t) = x13 = u(9); psiz_dot(t) = x14 = u(10); psiz_2dot = x15;
T1 = x16 = u(11); T2 = x17 = u(12); T3 = x18 = u(13);
%%%%%%
Rs l Rw Ms Is Mb Ib g Mw Iw
x3 = (2*2^(1/2)*Ib*Rs*Rw*u(11) - 2^(1/2)*Ib*Rs*Rw*u(12) - 2^(1/2)*Ib*Rs*Rw*u(13) + 12*Mw^2*Rs^2*Rw^4*u(6)^2*sin(u(5)) + 12*Mw^2*Rs^3*Rw^3*u(6)^2*sin(u(5)) + 4*Mw^2*Rs^4*Rw^2*u(6)^2*sin(u(5)) + 4*Iw*Mw*Rs^4*u(6)^2*sin(u(5)) + 2*2^(1/2)*Mw*Rs*Rw^3*u(11) + 2*2^(1/2)*Mw*Rs^3*Rw*u(11) - 2^(1/2)*Mw*Rs*Rw^3*u(12) - 2^(1/2)*Mw*Rs^3*Rw*u(12) - 2^(1/2)*Mw*Rs*Rw^3*u(13) - 2^(1/2)*Mw*Rs^3*Rw*u(13) + 4*Mw^2*Rs*Rw^5*u(6)^2*sin(u(5)) + 4*2^(1/2)*Mw*Rs^2*Rw^2*u(11) - 2*2^(1/2)*Mw*Rs^2*Rw^2*u(12) - 2*2^(1/2)*Mw*Rs^2*Rw^2*u(13) + 4*Iw*Mw*Rs^3*g*sin(u(5)) + 4*Ib*Mw*Rs^2*Rw^2*u(6)^2*sin(u(5)) - 4*Mw^2*Rs*Rw^4*g*cos(u(5))*sin(u(5)) + 4*Iw*Mw*Rs^2*Rw*g*sin(u(5)) + 2*2^(1/2)*Mw*Rs^3*Rw*u(11)*cos(u(5)) - 2^(1/2)*Mw*Rs^3*Rw*u(12)*cos(u(5)) - 2^(1/2)*Mw*Rs^3*Rw*u(13)*cos(u(5)) + 4*Iw*Mb*Rs^2*g*l*sin(u(5)) - 8*Mw^2*Rs^2*Rw^3*g*cos(u(5))*sin(u(5)) - 4*Mw^2*Rs^3*Rw^2*g*cos(u(5))*sin(u(5)) + 4*Mb^2*Rs*Rw^2*l^3*u(6)^2*sin(u(5)) + 4*Ib*Mw*Rs*Rw^3*u(6)^2*sin(u(5)) + 4*Iw*Mw*Rs^3*Rw*u(6)^2*sin(u(5)) + 2*2^(1/2)*Mw*Rs^2*Rw^2*u(11)*cos(u(5)) - 2^(1/2)*Mw*Rs^2*Rw^2*u(12)*cos(u(5)) - 2^(1/2)*Mw*Rs^2*Rw^2*u(13)*cos(u(5)) + 4*Iw*Mb*Rs^3*l*u(6)^2*sin(u(5)) + 2*2^(1/2)*Mb*Rs*Rw*l^2*u(11) - 2^(1/2)*Mb*Rs*Rw*l^2*u(12) - 2^(1/2)*Mb*Rs*Rw*l^2*u(13) - 4*Mb^2*Rs*Rw^2*g*l^2*cos(u(5))*sin(u(5)) + 4*Ib*Mb*Rs*Rw^2*l*u(6)^2*sin(u(5)) + 4*Mb*Mw*Rs*Rw^4*l*u(6)^2*sin(u(5)) + 4*Mb*Mw*Rs*Rw^3*l^2*u(6)^2*sin(u(5)) + 8*Mb*Mw*Rs^2*Rw^3*l*u(6)^2*sin(u(5)) + 4*Mb*Mw*Rs^3*Rw^2*l*u(6)^2*sin(u(5)) + 2*2^(1/2)*Mb*Rs^2*Rw*l*u(11)*cos(u(5)) - 2^(1/2)*Mb*Rs^2*Rw*l*u(12)*cos(u(5)) - 2^(1/2)*Mb*Rs^2*Rw*l*u(13)*cos(u(5)) + 4*Mb*Mw*Rs^2*Rw^2*l^2*u(6)^2*sin(u(5)) - 8*Mb*Mw*Rs*Rw^3*g*l*cos(u(5))*sin(u(5)) - 8*Mb*Mw*Rs^2*Rw^2*g*l*cos(u(5))*sin(u(5)))/(4*(Mw^2*Rs^2*Rw^4 + 2*Mw^2*Rs^3*Rw^3 + Mw^2*Rs^4*Rw^2 + Ib*Is*Rw^2 + Ib*Iw*Rs^2 + Is*Iw*Rs^2 + Iw*Mb*Rs^4 + Iw*Ms*Rs^4 + Is*Mw*Rw^4 + 2*Iw*Mw*Rs^4 + Mb^2*Rs^2*Rw^2*l^2 + Ib*Mb*Rs^2*Rw^2 + Ib*Ms*Rs^2*Rw^2 + Ib*Mw*Rs^2*Rw^2 + Is*Mw*Rs^2*Rw^2 + Iw*Mw*Rs^2*Rw^2 + Mb*Mw*Rs^2*Rw^4 + 2*Mb*Mw*Rs^3*Rw^3 + Mb*Mw*Rs^4*Rw^2 + Ms*Mw*Rs^2*Rw^4 + 2*Ms*Mw*Rs^3*Rw^3 + Ms*Mw*Rs^4*Rw^2 + Is*Mb*Rw^2*l^2 + Iw*Mb*Rs^2*l^2 + 2*Iw*Mw*Rs^4*cos(u(5)) - Mw^2*Rs^2*Rw^4*cos(u(5))^2 - 2*Mw^2*Rs^3*Rw^3*cos(u(5))^2 - Mw^2*Rs^4*Rw^2*cos(u(5))^2 + 2*Is*Mw*Rs*Rw^3 + 2*Iw*Mw*Rs^3*Rw + Mb*Ms*Rs^2*Rw^2*l^2 + Mb*Mw*Rs^2*Rw^2*l^2 - Mb^2*Rs^2*Rw^2*l^2*cos(u(5))^2 + 2*Iw*Mw*Rs^3*Rw*cos(u(5)) + 2*Iw*Mb*Rs^3*l*cos(u(5)) - 2*Mb*Mw*Rs^2*Rw^3*l*cos(u(5))^2 - 2*Mb*Mw*Rs^3*Rw^2*l*cos(u(5))^2));
x9 = (2^(1/2)*Is*Rs*Rw*u(12) - 2*2^(1/2)*Is*Rs*Rw*u(11) + 2^(1/2)*Is*Rs*Rw*u(13) + 4*Iw*Mw*Rs^4*u(6)^2*sin(u(5)) - 2*2^(1/2)*Mb*Rs^3*Rw*u(11) + 2^(1/2)*Mb*Rs^3*Rw*u(12) + 2^(1/2)*Mb*Rs^3*Rw*u(13) - 2*2^(1/2)*Ms*Rs^3*Rw*u(11) + 2^(1/2)*Ms*Rs^3*Rw*u(12) + 2^(1/2)*Ms*Rs^3*Rw*u(13) - 2*2^(1/2)*Mw*Rs^3*Rw*u(11) + 2^(1/2)*Mw*Rs^3*Rw*u(12) + 2^(1/2)*Mw*Rs^3*Rw*u(13) + 4*Mw^2*Rs^2*Rw^3*g*sin(u(5)) + 4*Mw^2*Rs^3*Rw^2*g*sin(u(5)) + 4*Is*Mw*Rw^3*g*sin(u(5)) + 4*Iw*Mw*Rs^3*g*sin(u(5)) - 4*Mw^2*Rs^2*Rw^4*u(6)^2*cos(u(5))*sin(u(5)) - 8*Mw^2*Rs^3*Rw^3*u(6)^2*cos(u(5))*sin(u(5)) - 4*Mw^2*Rs^4*Rw^2*u(6)^2*cos(u(5))*sin(u(5)) + 4*Mb^2*Rs^2*Rw^2*g*l*sin(u(5)) + 4*Is*Mw*Rs*Rw^2*g*sin(u(5)) + 4*Iw*Mw*Rs^2*Rw*g*sin(u(5)) - 2*2^(1/2)*Mw*Rs^3*Rw*u(11)*cos(u(5)) + 2^(1/2)*Mw*Rs^3*Rw*u(12)*cos(u(5)) + 2^(1/2)*Mw*Rs^3*Rw*u(13)*cos(u(5)) + 4*Is*Mb*Rw^2*g*l*sin(u(5)) + 4*Iw*Mb*Rs^2*g*l*sin(u(5)) + 4*Mb*Mw*Rs^2*Rw^3*g*sin(u(5)) + 4*Mb*Mw*Rs^3*Rw^2*g*sin(u(5)) + 4*Ms*Mw*Rs^2*Rw^3*g*sin(u(5)) + 4*Ms*Mw*Rs^3*Rw^2*g*sin(u(5)) + 4*Iw*Mw*Rs^3*Rw*u(6)^2*sin(u(5)) - 2*2^(1/2)*Mw*Rs^2*Rw^2*u(11)*cos(u(5)) + 2^(1/2)*Mw*Rs^2*Rw^2*u(12)*cos(u(5)) + 2^(1/2)*Mw*Rs^2*Rw^2*u(13)*cos(u(5)) + 4*Iw*Mb*Rs^3*l*u(6)^2*sin(u(5)) + 4*Mb*Ms*Rs^2*Rw^2*g*l*sin(u(5)) + 4*Mb*Mw*Rs^2*Rw^2*g*l*sin(u(5)) - 2*2^(1/2)*Mb*Rs^2*Rw*l*u(11)*cos(u(5)) + 2^(1/2)*Mb*Rs^2*Rw*l*u(12)*cos(u(5)) + 2^(1/2)*Mb*Rs^2*Rw*l*u(13)*cos(u(5)) - 4*Mb^2*Rs^2*Rw^2*l^2*u(6)^2*cos(u(5))*sin(u(5)) - 8*Mb*Mw*Rs^2*Rw^3*l*u(6)^2*cos(u(5))*sin(u(5)) - 8*Mb*Mw*Rs^3*Rw^2*l*u(6)^2*cos(u(5))*sin(u(5)))/(4*(Mw^2*Rs^2*Rw^4 + 2*Mw^2*Rs^3*Rw^3 + Mw^2*Rs^4*Rw^2 + Ib*Is*Rw^2 + Ib*Iw*Rs^2 + Is*Iw*Rs^2 + Iw*Mb*Rs^4 + Iw*Ms*Rs^4 + Is*Mw*Rw^4 + 2*Iw*Mw*Rs^4 + Mb^2*Rs^2*Rw^2*l^2 + Ib*Mb*Rs^2*Rw^2 + Ib*Ms*Rs^2*Rw^2 + Ib*Mw*Rs^2*Rw^2 + Is*Mw*Rs^2*Rw^2 + Iw*Mw*Rs^2*Rw^2 + Mb*Mw*Rs^2*Rw^4 + 2*Mb*Mw*Rs^3*Rw^3 + Mb*Mw*Rs^4*Rw^2 + Ms*Mw*Rs^2*Rw^4 + 2*Ms*Mw*Rs^3*Rw^3 + Ms*Mw*Rs^4*Rw^2 + Is*Mb*Rw^2*l^2 + Iw*Mb*Rs^2*l^2 + 2*Iw*Mw*Rs^4*cos(u(5)) - Mw^2*Rs^2*Rw^4*cos(u(5))^2 - 2*Mw^2*Rs^3*Rw^3*cos(u(5))^2 - Mw^2*Rs^4*Rw^2*cos(u(5))^2 + 2*Is*Mw*Rs*Rw^3 + 2*Iw*Mw*Rs^3*Rw + Mb*Ms*Rs^2*Rw^2*l^2 + Mb*Mw*Rs^2*Rw^2*l^2 - Mb^2*Rs^2*Rw^2*l^2*cos(u(5))^2 + 2*Iw*Mw*Rs^3*Rw*cos(u(5)) + 2*Iw*Mb*Rs^3*l*cos(u(5)) - 2*Mb*Mw*Rs^2*Rw^3*l*cos(u(5))^2 - 2*Mb*Mw*Rs^3*Rw^2*l*cos(u(5))^2));
x6 = (12*Mw^2*Rs^2*Rw^4*u(8)^2*sin(u(7))+ 6^(1/2)*Ib*Rs*Rw*u(12) - 6^(1/2)*Ib*Rs*Rw*u(13) + 12*Mw^2*Rs^3*Rw^3*u(8)^2*sin(u(7)) + 4*Mw^2*Rs^4*Rw^2*u(8)^2*sin(u(7)) + 4*Iw*Mw*Rs^4*u(8)^2*sin(u(7)) - 6^(1/2)*Mw*Rs*Rw^3*u(13) - 6^(1/2)*Mw*Rs^3*Rw*u(13) + 4*Mw^2*Rs*Rw^5*u(8)^2*sin(u(7)) - 2*6^(1/2)*Mw*Rs^2*Rw^2*u(13) + 4*Iw*Mw*Rs^3*g*sin(u(7)) + 4*Ib*Mw*Rs^2*Rw^2*u(8)^2*sin(u(7)) - 4*Mw^2*Rs*Rw^4*g*cos(u(7))*sin(u(7)) + 4*Iw*Mw*Rs^2*Rw*g*sin(u(7)) - 6^(1/2)*Mw*Rs^3*Rw*u(13)*cos(u(7)) + 4*Iw*Mb*Rs^2*g*l*sin(u(7)) - 8*Mw^2*Rs^2*Rw^3*g*cos(u(7))*sin(u(7)) - 4*Mw^2*Rs^3*Rw^2*g*cos(u(7))*sin(u(7)) + 4*Mb^2*Rs*Rw^2*l^3*u(8)^2*sin(u(7)) + 4*Ib*Mw*Rs*Rw^3*u(8)^2*sin(u(7)) + 4*Iw*Mw*Rs^3*Rw*u(8)^2*sin(u(7)) - 6^(1/2)*Mw*Rs^2*Rw^2*u(13)*cos(u(7)) + 4*Iw*Mb*Rs^3*l*u(8)^2*sin(u(7)) - 6^(1/2)*Mb*Rs*Rw*l^2*u(13) - 4*Mb^2*Rs*Rw^2*g*l^2*cos(u(7))*sin(u(7)) + 4*Ib*Mb*Rs*Rw^2*l*u(8)^2*sin(u(7)) + 4*Mb*Mw*Rs*Rw^4*l*u(8)^2*sin(u(7)) + 4*Mb*Mw*Rs*Rw^3*l^2*u(8)^2*sin(u(7)) + 8*Mb*Mw*Rs^2*Rw^3*l*u(8)^2*sin(u(7)) + 4*Mb*Mw*Rs^3*Rw^2*l*u(8)^2*sin(u(7)) - 6^(1/2)*Mb*Rs^2*Rw*l*u(13)*cos(u(7)) + 4*Mb*Mw*Rs^2*Rw^2*l^2*u(8)^2*sin(u(7)) - 8*Mb*Mw*Rs*Rw^3*g*l*cos(u(7))*sin(u(7)) - 8*Mb*Mw*Rs^2*Rw^2*g*l*cos(u(7))*sin(u(7)))/(4*(Mw^2*Rs^2*Rw^4 + 2*Mw^2*Rs^3*Rw^3 + Mw^2*Rs^4*Rw^2 + Ib*Is*Rw^2 + Ib*Iw*Rs^2 + Is*Iw*Rs^2 + Iw*Mb*Rs^4 + Iw*Ms*Rs^4 + Is*Mw*Rw^4 + 2*Iw*Mw*Rs^4 + Mb^2*Rs^2*Rw^2*l^2 + Ib*Mb*Rs^2*Rw^2 + Ib*Ms*Rs^2*Rw^2 + Ib*Mw*Rs^2*Rw^2 + Is*Mw*Rs^2*Rw^2 + Iw*Mw*Rs^2*Rw^2 + Mb*Mw*Rs^2*Rw^4 + 2*Mb*Mw*Rs^3*Rw^3 + Mb*Mw*Rs^4*Rw^2 + Ms*Mw*Rs^2*Rw^4 + 2*Ms*Mw*Rs^3*Rw^3 + Ms*Mw*Rs^4*Rw^2 + Is*Mb*Rw^2*l^2 + Iw*Mb*Rs^2*l^2 + 2*Iw*Mw*Rs^4*cos(u(7)) - Mw^2*Rs^2*Rw^4*cos(u(7))^2 - 2*Mw^2*Rs^3*Rw^3*cos(u(7))^2 - Mw^2*Rs^4*Rw^2*cos(u(7))^2 + 2*Is*Mw*Rs*Rw^3 + 2*Iw*Mw*Rs^3*Rw + Mb*Ms*Rs^2*Rw^2*l^2 + Mb*Mw*Rs^2*Rw^2*l^2 - Mb^2*Rs^2*Rw^2*l^2*cos(u(7))^2 + 2*Iw*Mw*Rs^3*Rw*cos(u(7)) + 2*Iw*Mb*Rs^3*l*cos(u(7)) - 2*Mb*Mw*Rs^2*Rw^3*l*cos(u(7))^2 - 2*Mb*Mw*Rs^3*Rw^2*l*cos(u(7))^2));
x12 = (6^(1/2)*Is*Rs*Rw*u(13) - 6^(1/2)*Is*Rs*Rw*u(12) + 4*Iw*Mw*Rs^4*u(8)^2*sin(u(7)) + 6^(1/2)*Mb*Rs^3*Rw*u(13) + 6^(1/2)*Ms*Rs^3*Rw*u(13) + 6^(1/2)*Mw*Rs^3*Rw*u(13) + 4*Mw^2*Rs^2*Rw^3*g*sin(u(7)) + 4*Mw^2*Rs^3*Rw^2*g*sin(u(7)) + 4*Is*Mw*Rw^3*g*sin(u(7)) + 4*Iw*Mw*Rs^3*g*sin(u(7)) - 4*Mw^2*Rs^2*Rw^4*u(8)^2*cos(u(7))*sin(u(7)) - 8*Mw^2*Rs^3*Rw^3*u(8)^2*cos(u(7))*sin(u(7)) - 4*Mw^2*Rs^4*Rw^2*u(8)^2*cos(u(7))*sin(u(7)) + 4*Mb^2*Rs^2*Rw^2*g*l*sin(u(7)) + 4*Is*Mw*Rs*Rw^2*g*sin(u(7)) + 4*Iw*Mw*Rs^2*Rw*g*sin(u(7)) + 6^(1/2)*Mw*Rs^3*Rw*u(13)*cos(u(7)) + 4*Is*Mb*Rw^2*g*l*sin(u(7)) + 4*Iw*Mb*Rs^2*g*l*sin(u(7)) + 4*Mb*Mw*Rs^2*Rw^3*g*sin(u(7)) + 4*Mb*Mw*Rs^3*Rw^2*g*sin(u(7)) + 4*Ms*Mw*Rs^2*Rw^3*g*sin(u(7)) + 4*Ms*Mw*Rs^3*Rw^2*g*sin(u(7)) + 4*Iw*Mw*Rs^3*Rw*u(8)^2*sin(u(7)) + 6^(1/2)*Mw*Rs^2*Rw^2*u(13)*cos(u(7)) + 4*Iw*Mb*Rs^3*l*u(8)^2*sin(u(7)) + 4*Mb*Ms*Rs^2*Rw^2*g*l*sin(u(7)) + 4*Mb*Mw*Rs^2*Rw^2*g*l*sin(u(7)) + 6^(1/2)*Mb*Rs^2*Rw*l*u(13)*cos(u(7)) - 4*Mb^2*Rs^2*Rw^2*l^2*u(8)^2*cos(u(7))*sin(u(7)) - 8*Mb*Mw*Rs^2*Rw^3*l*u(8)^2*cos(u(7))*sin(u(7)) - 8*Mb*Mw*Rs^3*Rw^2*l*u(8)^2*cos(u(7))*sin(u(7)))/(4*(Mw^2*Rs^2*Rw^4 + 2*Mw^2*Rs^3*Rw^3 + Mw^2*Rs^4*Rw^2 + Ib*Is*Rw^2 + Ib*Iw*Rs^2 + Is*Iw*Rs^2 + Iw*Mb*Rs^4 + Iw*Ms*Rs^4 + Is*Mw*Rw^4 + 2*Iw*Mw*Rs^4 + Mb^2*Rs^2*Rw^2*l^2 + Ib*Mb*Rs^2*Rw^2 + Ib*Ms*Rs^2*Rw^2 + Ib*Mw*Rs^2*Rw^2 + Is*Mw*Rs^2*Rw^2 + Iw*Mw*Rs^2*Rw^2 + Mb*Mw*Rs^2*Rw^4 + 2*Mb*Mw*Rs^3*Rw^3 + Mb*Mw*Rs^4*Rw^2 + Ms*Mw*Rs^2*Rw^4 + 2*Ms*Mw*Rs^3*Rw^3 + Ms*Mw*Rs^4*Rw^2 + Is*Mb*Rw^2*l^2 + Iw*Mb*Rs^2*l^2 + 2*Iw*Mw*Rs^4*cos(u(7)) - Mw^2*Rs^2*Rw^4*cos(u(7))^2 - 2*Mw^2*Rs^3*Rw^3*cos(u(7))^2 - Mw^2*Rs^4*Rw^2*cos(u(7))^2 + 2*Is*Mw*Rs*Rw^3 + 2*Iw*Mw*Rs^3*Rw + Mb*Ms*Rs^2*Rw^2*l^2 + Mb*Mw*Rs^2*Rw^2*l^2 - Mb^2*Rs^2*Rw^2*l^2*cos(u(7))^2 + 2*Iw*Mw*Rs^3*Rw*cos(u(7)) + 2*Iw*Mb*Rs^3*l*cos(u(7)) - 2*Mb*Mw*Rs^2*Rw^3*l*cos(u(7))^2 - 2*Mb*Mw*Rs^3*Rw^2*l*cos(u(7))^2));
x15 = -(Rs*((2^(1/2)*u(11))/2 + (2^(1/2)*u(12))/2 + (2^(1/2)*u(13))/2))/(Rw*(Ib_xy + Mw*(Rs + Rw)^2 + (Iw_xy*Rs^2)/Rw^2));

